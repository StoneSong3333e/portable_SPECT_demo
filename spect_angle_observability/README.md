# SPECT Angle Observability Demo (Side-View Projections)

This folder contains a minimal, reproducible feasibility demo investigating
whether **raw side-view SPECT projections contain recoverable angular information**
under realistic photon-counting noise.

The demo is intended to test *observability* rather than provide a full
geometric calibration or reconstruction pipeline.

---

## Overview

The demo simulates raw SPECT projections using a simplified physical model:

- A 3D activity distribution from an official **Jaszczak phantom**
- The phantom rotates around the **Z-axis**
- A virtual detector is fixed viewing from the **+X direction**
- At each angle, a **side-view projection** is generated by integrating activity
  along the X direction (parallel-beam approximation)

Small angular perturbations and Poisson noise are introduced to emulate
mechanical uncertainty and photon statistics in compact / portable SPECT systems.

---

## Files

- `make_projections.py`  
  Generates noiseless side-view projections from a 3D Jaszczak phantom
  using rotation and line-integral projection.

- `angle_demo_sides.py`  
  Simulates angular perturbations and Poisson counting noise, then estimates
  the projection angle using simple feature-based matching against a
  projection library.

---

## Data Availability

The Jaszczak phantom activity data (`.h33` / `.i33`, Interfile format)  
is **not included in this repository** for the following reasons:

- The original files are relatively large and not well-suited for direct
  inclusion in a lightweight code repository.
- The phantom data is distributed by third parties, and redistribution may
  be subject to licensing or usage restrictions.

To run the demo, users should obtain the official 3D Jaszczak phantom files
from publicly available nuclear medicine simulation resources
(e.g., GATE / Geant4 tutorial datasets or academic repositories).

Once obtained, place the phantom files in the same directory as the scripts.

---

## Noise Model

- Photon statistics are modeled using **Poisson noise**, reflecting the
  discrete nature of radioactive decay and detection.
- Normalized projections are scaled to realistic count levels
  (typically on the order of 10³–10⁴ counts per view) before Poisson sampling.

The emphasis is on testing **angle observability under noise**, not image quality.

---

## Usage

After placing the Jaszczak phantom files in this directory:

```bash
python make_projections.py
python angle_demo_sides.py


The script prints:
	•	Commanded angle (θ_cmd)
	•	True angle after perturbation (θ_true)
	•	Estimated angle from image data (θ_est)
	•	Estimation error and matching MSE

Optional image outputs can be enabled for visualization.

⸻

Notes and Limitations
	•	Parallel-beam geometry is assumed.
	•	Scatter, attenuation, and detector PSF are not modeled.
	•	This demo establishes feasibility and upper-bound observability only.

More realistic physics and advanced estimation methods are addressed
in later research stages.
